<cb-navbar id="cb-navbar" style="height: 56px; display: block"></cb-navbar>
<script>
    let shadow = document
        .getElementById("cb-navbar")
        .attachShadow({ mode: "open" });
    document.getElementById("cb-navbar").shadowRoot.innerHTML = `
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <${"script"} src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></${"script"}>
        <nav
            class="navbar navbar-expand-lg fixed-top"
            style="background: var(--bg)"
            id="navbar"
        >
            <div class="container-fluid">
                <a id="logo" class="navbar-brand" href="/main">클래스보드</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                    onclick="let e = this.parentElement.querySelector('#navbarSupportedContent'); if (e.style.display == 'block') e.style.display = 'none'; else e.style.display = 'block'"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <% if (user_id) { %>
                        <li class="nav-item">
                            <a id="navbar-setting" class="nav-link" href="/setting"
                                >설정</a
                            >
                        </li>
                        <% } else { %>
                        <li class="nav-item">
                            <a id="navbar-login" class="nav-link" href="/login"
                                >로그인</a
                            >
                        </li>
                        <% } %> <% if (user_type == "teacher") { %>
                        <li id="navbar-teacher" class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                                onclick="this.parentElement.querySelector('#hiozbio').style.display='block'"
                            >
                                선생님 메뉴
                            </a>
                            <ul id="hiozbio" class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li>
                                    <a class="dropdown-item" href="/teacher"
                                        >학급 관리</a
                                    >
                                </li>
                                <li><hr class="dropdown-divider" /></li>
                                <li>
                                    <a class="dropdown-item" href="/teacher/seat"
                                        >자리 바꾸기</a
                                    >
                                </li>
                            </ul>
                        </li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </nav>
        <${"script"}>
            window.addEventListener("load", () => {
                document.body.style.marginTop = document.getElementById("navbar").offsetHeight;
                document
                    .getElementById("navbar")
                    .classList.add("navbar-" + localStorage.getItem("theme"));
                document
                    .getElementById(
                        "navbar-" + new URL(location.href).pathname.split("/")[1]
                    )
                    .classList.add("active");
            });
        </${"script"}>`;

    shadow
        .getElementById("navbar")
        .classList.add("navbar-" + localStorage.getItem("theme"));
    if (new URL(location.href).pathname == "/")
        shadow.getElementById("logo").setAttribute("href", "/");
</script>
